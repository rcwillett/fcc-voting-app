{"version":3,"sources":["app.js","constants/appConstants.js","services/loginService.js","services/notificationService.js","services/pollsService.js","services/userService.js","controllers/createEditPollController.js","controllers/loginController.js","controllers/menuController.js","controllers/pollStatsController.js","controllers/pollViewController.js","controllers/pollsController.js","controllers/userPollsController.js"],"names":["angular","module","run","$rootScope","$location","loginService","appConstants","loading","loggedIn","isLoggedIn","then","resp","data","status","$on","event","next","current","$$route","restrictedRoutes","indexOf","originalPath","path","config","$routeProvider","when","templateUrl","controller","createEdit","createEditEnum","create","edit","otherwise","constant","service","$http","self","this","login","get","logout","toastr","success","msg","failure","fail","getPoll","id","method","url","getPolls","numItems","params","getUserPolls","userId","createPoll","pollObj","editPoll","addPollOption","pollId","optionText","type","vote","optionId","getUserInfo","$scope","$timeout","$route","$routeParams","pollService","successfulPollCreation","res","window","location","failedPollCreation","href","vm","error","errorMessage","message","pollObject","pollName","pollDescription","pollOptions","name","description","options","scopeApply","$apply","addOption","errorMsg","length","pollOptionId","push","removeOption","splice","forEach","option","index","submitPoll","pollTitle","serverResp","pollInfo","submitText","unexpectedError","loginSuccess","loginFail","logInWithGit","showError","Boolean","logOutSuccess","failResp","menuVm","logOut","initBarChart","labels","votes","colours","ctx","document","getElementById","getContext","Chart","datasets","label","backgroundColor","borderWidth","scales","yAxes","ticks","beginAtZero","responsive","initPieChart","rainbow","numOfSteps","step","r","g","b","h","i","f","q","toString","slice","optionResults","poll","optionNames","optionVotes","optionColors","optionArray","numTimesSelected","pollNotifier","getPollSuccess","selectedOption","userSelection","facebookShareLink","encodeURI","twitterShareLink","submitSelection","submitNewOption","newOptionForm","newPollOption","$error","required","pattern","newOptionSuccess","requestFailure","newOptionFormVisible","addNewOptionVisible","addNewOption","showNewOptionForm","inputValidationPattern","pollArray","pollResult","pollsService","successResp","errorResp","generateStatsLink","generateEditLink"],"mappings":"AACAA,QAAAC,OAAA,WAAA,UAAA,WACAC,KAAA,aAAA,YAAA,eAAA,eAAA,SAAAC,EAAAC,EAAAC,EAAAC,GAEAH,EAAAI,SAAA,EACAJ,EAAAK,UAAA,EAEAH,EAAAI,aAAAC,KAWA,SAAAC,GACAR,EAAAK,SAAAG,EAAAC,KAAAC,OACAV,EAAAI,SAAA,GAGA,SAAAI,GACAR,EAAAK,UAAA,EACAL,EAAAI,SAAA,IAhBAJ,EAAAW,IAAA,oBAAA,SAAAC,EAAAC,EAAAC,GACAd,EAAAK,UAGAQ,EAAAE,SAAAZ,EAAAa,iBAAAC,QAAAJ,EAAAE,QAAAG,eAAA,GACAjB,EAAAkB,KAAA,eAcAC,QAAA,iBAAA,eAAA,SAAAC,EAAAlB,GACAkB,EACAC,KAAA,qBACAC,YAAA,qCACAC,WAAA,uBAEAF,KAAA,eACAC,YAAA,+CACAC,WAAA,2BACAC,WAAAtB,EAAAuB,eAAAC,SAEAL,KAAA,qBACAC,YAAA,+CACAC,WAAA,2BACAC,WAAAtB,EAAAuB,eAAAE,OAEAN,KAAA,sBACAC,YAAA,0CACAC,WAAA,wBAEAF,KAAA,YACAC,YAAA,0CACAC,WAAA,uBAEAF,KAAA,UACAC,YAAA,sCACAC,WAAA,oBAEAK,WACAN,YAAA,qCACAC,WAAA,sBCzDA3B,QAAAC,OAAA,WACAgC,SAAA,gBACAJ,gBACAC,OAAA,EACAC,KAAA,GAEAZ,kBAAA,WAAA,cAAA,aAAA,eCNAnB,QAAAC,OAAA,WACAiC,QAAA,gBAAA,aAAA,QAAA,SAAA/B,EAAAgC,GACA,IAAAC,EAAAC,KAoBA,OAlBAD,EAAAE,MAMA,WACA,OAAAH,EAAAI,IAAA,iBALAH,EAAAI,OAQA,WACA,OAAAL,EAAAI,IAAA,YAPAH,EAAA3B,WAUA,WACA,OAAA0B,EAAAI,IAAA,gBAGAH,KCtBApC,QAAAC,OAAA,WACAiC,QAAA,gBAAA,SAAA,SAAAO,GACA,OACAC,QAIA,SAAAC,GACAF,EAAAC,QAAAC,IAJAC,QAOA,SAAAD,GACAF,EAAAI,KAAAF,QCZA3C,QAAAC,OAAA,WACAiC,QAAA,eAAA,QAAA,SAAAC,GACA,IAAAC,EAAAC,KAuEA,OArEAD,EAAAU,QAAA,SAAAC,GAEA,OAAAZ,GACAa,OAAA,MACAC,IAHA,SAAAF,KAOAX,EAAAc,SAAA,SAAAC,GAEA,OAAAhB,GACAa,OAAA,MACAC,IAAA,SACAG,QAJAD,SAAAA,MAQAf,EAAAiB,aAAA,SAAAC,GACA,OAAAnB,GACAa,OAAA,MACAC,IAAA,gBAIAb,EAAAmB,WAAA,SAAAC,GAEA,OAAArB,GACAa,OAAA,OACAC,IAAA,WACArC,KAJA4C,KAQApB,EAAAqB,SAAA,SAAAD,GAEA,OAAArB,GACAa,OAAA,OACAC,IAAA,WACArC,KAJA4C,KAQApB,EAAAsB,cAAA,SAAAC,EAAAC,GAMA,OAAAzB,GACAa,OAAA,OACAC,IAAA,iBACArC,MAPA+C,OAAAA,EACAC,WAAAA,GAOAC,KAAA,sBAIAzB,EAAA0B,KAAA,SAAAH,EAAAI,GAKA,OAAA5B,GACAa,OAAA,OACAC,IAAA,QACArC,MANA+C,OAAAA,EACAI,SAAAA,GAMAF,KAAA,sBAIAzB,KCzEApC,QAAAC,OAAA,WACAiC,QAAA,eAAA,QAAA,SAAAC,GACA,IAAAC,EAAAC,KAYA,OAVAD,EAAA4B,YAEA,WAEA,OAAA7B,GACAa,OAAA,MACAC,IAHA,kBAOAb,KCdApC,QAAAC,OAAA,WACA0B,WAAA,4BAAA,SAAA,WAAA,SAAA,eAAA,cAAA,eAAA,SAAAsC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA/D,GAmEA,SAAAgE,EAAAC,GACAC,OAAAC,SAAA,gBAAAF,EAAA3D,KAAA+C,OAGA,SAAAe,EAAAH,GACA,MAAAA,EAAA1D,QAAA,MAAA0D,EAAA1D,OACA2D,OAAAC,SAAAE,KAAA,aAGAC,EAAAC,OAAA,EACAD,EAAAE,aAAAP,EAAAQ,SAIA,SAAAC,EAAArB,EAAAsB,EAAAC,EAAAC,GACA9C,KAAAsB,OAAAA,EACAtB,KAAA+C,KAAAH,EACA5C,KAAAgD,YAAAH,EACA7C,KAAAiD,QAAAH,EAGA,SAAAI,IACArB,EAAA,WAAAD,EAAAuB,WAxFAvB,EAAAW,MACA,IAAAA,EAAAX,EAAAW,GACAA,EAAAa,UA8BA,WAEA,GADAb,EAAAc,SAAA,GACA,IAAAd,EAAAO,YAAAQ,QAAA,KAAAf,EAAAO,YAAAP,EAAAO,YAAAQ,OAAA,GAAA/B,WAAA,CACA,IAAAgC,EAAAhB,EAAAO,YAAAQ,OACAf,EAAAO,YAAAU,MAAA9B,SAAA6B,EAAAhC,WAAA,UAGAgB,EAAAc,SAAA,uEApCAd,EAAAkB,aAwCA,SAAA/B,GACAa,EAAAO,YAAAY,OAAAhC,EAAA,GACAa,EAAAO,YAAAa,QAAA,SAAAC,EAAAC,GACAD,EAAAlC,SAAAmC,IAEAX,KA5CAX,EAAAuB,WA+CA,WACAvB,EAAAc,SAAA,GACAd,EAAAO,YAAAQ,OAAA,GAAAxB,EAAAlD,QAAAC,QAAAU,aAAAtB,EAAAuB,eAAAE,KACAsC,EAAAZ,SAAA,IAAAuB,EAAAJ,EAAAjB,OAAAiB,EAAAwB,UAAAxB,EAAAM,gBAAAN,EAAAO,cACAzE,KAAA4D,EAAAI,GAEAE,EAAAO,YAAAQ,OAAA,EACAtB,EAAAd,WAAA,IAAAyB,EAAAJ,EAAAjB,OAAAiB,EAAAwB,UAAAxB,EAAAM,gBAAAN,EAAAO,cACAzE,KAAA4D,EAAAI,GAGAE,EAAAc,SAAA,mDArDAvB,EAAAlD,QAAAC,QAAAU,aAAAtB,EAAAuB,eAAAE,KACAsC,EAAAvB,QAAAsB,EAAAT,QAAAjD,KACA,SAAA2F,GACAzB,EAAAjB,OAAA0C,EAAAzF,KAAA0F,SAAAvD,GACA6B,EAAAwB,UAAAC,EAAAzF,KAAA0F,SAAAlB,KACAR,EAAAM,gBAAAmB,EAAAzF,KAAA0F,SAAAjB,YACAT,EAAAO,YAAAkB,EAAAzF,KAAA0F,SAAAhB,QACAV,EAAA2B,WAAA,eAEA,SAAAF,GACAzB,EAAA4B,iBAAA,KAKA5B,EAAAwB,UAAA,GACAxB,EAAAM,gBAAA,GACAN,EAAAjB,OAAA,KACAiB,EAAAO,cAAApB,SAAA,EAAAH,WAAA,KACAgB,EAAA2B,WAAA,kBC9BAvG,QAAAC,OAAA,WACA0B,WAAA,mBAAA,SAAA,aAAA,eAAA,eAAA,SAAAsC,EAAA9D,EAAAiE,EAAA/D,GAWA,SAAAoG,EAAA9F,GACAR,EAAAK,UAAA,EACAgE,OAAAC,SAAAE,KAAA,IAGA,SAAA+B,EAAA/F,GACAiE,EAAAC,OAAA,EAhBAZ,EAAAW,MACA,IAAAA,EAAAX,EAAAW,GACAA,EAAA+B,aAIA,WACAtG,EAAAiC,QAAA5B,KAAA+F,EAAAC,IAJA9B,EAAAgC,UAAAC,QAAAzC,EAAAS,OACAD,EAAAE,aAAA,oCCNA9E,QAAAC,OAAA,WACA0B,WAAA,kBAAA,SAAA,aAAA,eAAA,SAAAsC,EAAA9D,EAAAE,GAUA,SAAAyG,IACA3G,EAAAK,UAAA,EACAgE,OAAAC,SAAAE,KAAA,IAGA,SAAAoC,IACA5G,EAAA0E,OAAA,GAdAZ,EAAA+C,WAEAC,OAEA,WACA5G,EAAAmC,SAAA9B,KAAAoG,EAAAC,OCRA/G,QAAAC,OAAA,WACA0B,WAAA,uBAAA,eAAA,SAAA,WAAA,cAAA,SAAAyC,EAAAH,EAAAC,EAAAG,GA8BA,SAAA6C,EAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAAC,SAAAC,eAAA,qBAAAC,WAAA,MACA,IAAAC,MAAAJ,GACAzD,KAAA,MACAjD,MACAuG,OAAAA,EACAQ,WACAC,MAAA,aACAhH,KAAAwG,EACAS,gBAAAR,EACAS,YAAA,KAGAxC,SACAyC,QACAC,QACAC,OACAC,aAAA,GAEAN,MAAA,iBAIAO,YAAA,IAIA,SAAAC,EAAAjB,EAAAC,EAAAC,GACA,IAAAC,EAAAC,SAAAC,eAAA,qBAAAC,WAAA,MACA,IAAAC,MAAAJ,GACAzD,KAAA,MACAjD,MACAuG,OAAAA,EACAQ,WACAC,MAAA,aACAhH,KAAAwG,EACAS,gBAAAR,EACAS,YAAA,KAGAxC,WAGA6C,YAAA,IAIA,SAAAE,EAAAC,EAAAC,GAIA,IAAAC,EAAAC,EAAAC,EACAC,EAAAJ,EAAAD,EACAM,KAAA,EAAAD,GACAE,EAAA,EAAAF,EAAAC,EACAE,EAAA,EAAAD,EACA,OAAAD,EAAA,GACA,KAAA,EACAJ,EAAA,EACAC,EAAAI,EACAH,EAAA,EACA,MACA,KAAA,EACAF,EAAAM,EACAL,EAAA,EACAC,EAAA,EACA,MACA,KAAA,EACAF,EAAA,EACAC,EAAA,EACAC,EAAAG,EACA,MACA,KAAA,EACAL,EAAA,EACAC,EAAAK,EACAJ,EAAA,EACA,MACA,KAAA,EACAF,EAAAK,EACAJ,EAAA,EACAC,EAAA,EACA,MACA,KAAA,EACAF,EAAA,EACAC,EAAA,EACAC,EAAAI,EAIA,MADA,KAAA,SAAA,IAAAN,IAAAO,SAAA,KAAAC,OAAA,IAAA,SAAA,IAAAP,IAAAM,SAAA,KAAAC,OAAA,IAAA,SAAA,IAAAN,IAAAK,SAAA,KAAAC,OAAA,GArHA/E,EAAAW,MACA,IAAAA,EAAAX,EAAAW,GACAA,EAAA4B,iBAAA,EACA5B,EAAAqE,iBACA,MAAA7E,EAAAT,QAAA,KAAAS,EAAAT,OACAU,EAAAvB,QAAAsB,EAAAT,QAAAjD,KACA,SAAA2F,GACAzB,EAAAsE,KAAA7C,EAAAzF,KAAA0F,SACA,IAAA6C,KACAC,KACAC,KACAzE,EAAAsE,KAAA5D,QAAAU,QAAA,SAAAC,EAAAC,EAAAoD,GACAH,EAAAtD,KAAAI,EAAArC,YACAwF,EAAAvD,KAAAI,EAAAsD,kBACAF,EAAAxD,KAAAwC,EAAAiB,EAAA3D,OAAAO,MAEAgB,EAAAiC,EAAAC,EAAAC,GACAjB,EAAAe,EAAAC,EAAAC,GACAnF,EAAA,WAAAD,EAAAuB,YAEA,SAAAa,GACAzB,EAAA4B,iBAAA,IAKAhC,OAAAC,SAAAE,KAAA,UC5BA3E,QAAAC,OAAA,WACA0B,WAAA,sBAAA,eAAA,SAAA,aAAA,WAAA,cAAA,eAAA,SAAAyC,EAAAH,EAAA9D,EAAA+D,EAAAG,EAAAmF,GA0BA,SAAAC,EAAApD,GACAzB,EAAAsE,KAAA7C,EAAAzF,KAAA0F,SACA1B,EAAA8E,eAAArD,EAAAzF,KAAA+I,cAAA/E,EAAAsE,KAAA5D,QAAAe,EAAAzF,KAAA+I,eAAA/E,EAAAsE,KAAA5D,QAAA,GACAV,EAAAgF,kBAAA,gDAAApF,OAAAqF,UAAArF,OAAAC,SAAAE,MACAC,EAAAkF,iBAAA,mCAAAtF,OAAAqF,UAAArF,OAAAC,SAAAE,MAGA,SAAAoF,IACA1F,EAAAP,KAAAM,EAAAT,OAAAiB,EAAA8E,eAAA3F,UACArD,KAAA,SAAAC,GACA6I,EAAA9G,QAAA,iCAIA,SAAAsH,IACA/F,EAAAgG,cAAAC,cAAAC,OAAAC,UAAAnG,EAAAgG,cAAAC,cAAAC,OAAAE,SACAhG,EAAAX,cAAAU,EAAAT,OAAAiB,EAAAsF,eAAAxJ,KAAA4J,EAAAC,GAIA,SAAAD,EAAA3J,GACAiE,EAAA4F,sBAAA,EACA5F,EAAA6F,qBAAA,EACA7F,EAAAsE,KAAAvI,EAAAC,KAAAA,KACA4I,EAAA9G,QAAA,oBAGA,SAAAgI,IACAvK,EAAAK,UACAmK,IAIA,SAAAA,IACA/F,EAAA4F,sBAAA,EACA5F,EAAA6F,qBAAA,EAGA,SAAAF,EAAA5J,GACA6I,EAAA5G,QAAAjC,EAAAoE,SAhEAd,EAAAW,MAEA,IAAAA,EAAAX,EAAAW,GAMAA,EAAA4B,iBAAA,EACA5B,EAAA4F,sBAAA,EACA5F,EAAA6F,qBAAA,EACA7F,EAAAmF,gBAAAA,EACAnF,EAAAoF,gBAAAA,EACApF,EAAA8F,aAAAA,EACA9F,EAAAgG,uBAAA,cACAhG,EAAAsF,cAAA,GAEA,MAAA9F,EAAAT,QAAA,KAAAS,EAAAT,OACAU,EAAAvB,QAAAsB,EAAAT,QAAAjD,KAAA+I,EAAAc,GAGA/F,OAAAC,SAAAE,KAAA,UCvBA3E,QAAAC,OAAA,WACA0B,WAAA,kBAAA,SAAA,cAAA,SAAAsC,EAAAI,GACAJ,EAAA4G,aACAxG,EAAAnB,SAAA,IAAAxC,KAAA,SAAAoK,GACA7G,EAAA4G,UAAAC,EAAAlK,UCJAZ,QAAAC,OAAA,WACA0B,WAAA,sBAAA,SAAA,cAAA,SAAAsC,EAAA8G,GAiBA,SAAAC,EAAArK,GACAiE,EAAAiG,UAAAlK,EAAAC,KACAgE,EAAArE,SAAA,EAGA,SAAA0K,EAAAtK,GACA,MAAAA,EAAAE,QAAA,MAAAF,EAAAE,SACA2D,OAAAC,SAAAE,KAAA,aAvBAV,EAAAW,MACA,IAAAA,EAAAX,EAAAW,GACAA,EAAArE,SAAA,EACAqE,EAAAC,OAAA,EACAD,EAAAiG,aAEAjG,EAAAsG,kBAyBA,SAAAvH,GACA,MAAA,eAAAA,GAxBAiB,EAAAuG,iBAmBA,SAAAxH,GACA,MAAA,cAAAA,GAfAoH,EAAA1H,eAAA3C,KAAAsK,EAAAC","file":"../js/site.min.js","sourcesContent":["(function() {\n    angular.module(\"pollApp\", [\"ngRoute\", \"toastr\"])\n        .run([\"$rootScope\", \"$location\", \"loginService\", \"appConstants\", function($rootScope, $location, loginService, appConstants) {\n\n            $rootScope.loading = true;\n            $rootScope.loggedIn = false;\n\n            loginService.isLoggedIn().then(successResp, notLoggedInResp);\n\n            $rootScope.$on(\"$routeChangeStart\", function(event, next, current) {\n                if ($rootScope.loggedIn) {\n                    return;\n                }\n                else if (next.$$route && appConstants.restrictedRoutes.indexOf(next.$$route.originalPath) > -1) {\n                    $location.path(\"/login\");\n                }\n            });\n\n            function successResp(resp) {\n                $rootScope.loggedIn = resp.data.status;\n                $rootScope.loading = false;\n            }\n\n            function notLoggedInResp(resp) {\n                $rootScope.loggedIn = false;\n                $rootScope.loading = false;\n            }\n        }])\n        .config([\"$routeProvider\", \"appConstants\", function($routeProvider, appConstants) {\n            $routeProvider\n                .when(\"/viewPoll/:pollId\", {\n                    templateUrl: \"/public/js/app/templates/poll.html\",\n                    controller: \"pollViewController\"\n                })\n                .when(\"/createPoll\", {\n                    templateUrl: \"/public/js/app/templates/createEditPoll.html\",\n                    controller: \"createEditPollController\",\n                    createEdit: appConstants.createEditEnum.create\n                })\n                .when(\"/editPoll/:pollId\", {\n                    templateUrl: \"/public/js/app/templates/createEditPoll.html\",\n                    controller: \"createEditPollController\",\n                    createEdit: appConstants.createEditEnum.edit\n                })\n                .when(\"/pollStats/:pollId\", {\n                    templateUrl: \"/public/js/app/templates/pollStats.html\",\n                    controller: \"pollStatsController\",\n                })\n                .when(\"/myPolls\", {\n                    templateUrl: \"/public/js/app/templates/userPolls.html\",\n                    controller: \"userPollController\",\n                })\n                .when(\"/login\", {\n                    templateUrl: \"/public/js/app/templates/login.html\",\n                    controller: \"loginController\"\n                })\n                .otherwise({\n                    templateUrl: \"/public/js/app/templates/home.html\",\n                    controller: \"pollController\"\n                });\n        }]);\n}());","(function() {\n    angular.module(\"pollApp\")\n        .constant(\"appConstants\", {\n            createEditEnum: {\n                create: 0,\n                edit: 1\n            },\n            restrictedRoutes: [\"/myPolls\", \"/createPoll\", \"/pollStats\", \"/editPoll\"]\n        });\n}());","(function() {\n    angular.module(\"pollApp\")\n        .service(\"loginService\", [\"$rootScope\", \"$http\", function($rootScope, $http) {\n            var self = this;\n\n            self.login = login;\n\n            self.logout = logout;\n\n            self.isLoggedIn = isLoggedIn;\n\n            function login() {\n                return $http.get(\"/auth/github\");\n            }\n\n            function logout() {\n                return $http.get(\"/logout\");\n            }\n\n            function isLoggedIn() {\n                return $http.get(\"/isLoggedIn\");\n            }\n\n            return self;\n        }]);\n}());","(function(){\n    angular.module(\"pollApp\")\n    .service(\"pollNotifier\", [\"toastr\", function(toastr){\n        return {\n          success: successFunction,\n          failure: failFunction\n        };\n        \n        function successFunction(msg){\n            toastr.success(msg);\n        }\n        \n        function failFunction(msg){\n            toastr.fail(msg);\n        }\n        \n    }]);\n}());","(function() {\n    angular.module(\"pollApp\")\n        .service(\"pollService\", [\"$http\", function($http) {\n            var self = this;\n\n            self.getPoll = function(id) {\n                var url = \"/poll/\" + id;\n                return $http({\n                    method: \"GET\",\n                    url: url\n                });\n            };\n\n            self.getPolls = function(numItems) {\n                var requestObj = { \"numItems\": numItems };\n                return $http({\n                    method: \"GET\",\n                    url: \"/polls\",\n                    params: requestObj\n                });\n            };\n\n            self.getUserPolls = function(userId) {\n                return $http({\n                    method: \"GET\",\n                    url: \"/userPolls\"\n                });\n            };\n\n            self.createPoll = function(pollObj) {\n                var requestData = pollObj;\n                return $http({\n                    method: \"POST\",\n                    url: \"/addPoll\",\n                    data: requestData\n                });\n            };\n\n            self.editPoll = function(pollObj) {\n                var requestData = pollObj;\n                return $http({\n                    method: \"POST\",\n                    url: \"/addPoll\",\n                    data: requestData\n                });\n            };\n\n            self.addPollOption = function(pollId, optionText) {\n                var requestData = {\n                    \"pollId\": pollId,\n                    \"optionText\": optionText\n                };\n\n                return $http({\n                    method: \"POST\",\n                    url: \"/addPollOption\",\n                    data: requestData,\n                    type: \"application/json\"\n                });\n            }\n\n            self.vote = function(pollId, optionId) {\n                var requestData = {\n                    \"pollId\": pollId,\n                    \"optionId\": optionId\n                };\n                return $http({\n                    method: \"POST\",\n                    url: \"/vote\",\n                    data: requestData,\n                    type: \"application/json\"\n                });\n            };\n\n            return self;\n        }]);\n}());\n","(function() {\n    angular.module(\"pollApp\")\n        .service(\"userService\", [\"$http\", function($http) {\n            var self = this;\n\n            self.getUserInfo = getUserInfo;\n\n            function getUserInfo() {\n                var url = \"/getUserInfo\";\n                return $http({\n                    method: \"GET\",\n                    url: url\n                });\n            }\n\n            return self;\n        }]);\n}());\n","(function() {\n    angular.module(\"pollApp\")\n        .controller(\"createEditPollController\", [\"$scope\", \"$timeout\", \"$route\", \"$routeParams\", \"pollService\", \"appConstants\", function createEditPollController($scope, $timeout, $route, $routeParams, pollService, appConstants) {\n            $scope.vm = {};\n            var vm = $scope.vm;\n            vm.addOption = addOption;\n            vm.removeOption = removeOption;\n            vm.submitPoll = submitPoll;\n\n            initData();\n\n            function initData() {\n                if ($route.current.$$route.createEdit === appConstants.createEditEnum.edit) {\n                    pollService.getPoll($routeParams.pollId).then(\n                        function(serverResp) {\n                            vm.pollId = serverResp.data.pollInfo.id\n                            vm.pollTitle = serverResp.data.pollInfo.name\n                            vm.pollDescription = serverResp.data.pollInfo.description;\n                            vm.pollOptions = serverResp.data.pollInfo.options;\n                            vm.submitText = \"Update Poll\";\n                        },\n                        function(serverResp) {\n                            vm.unexpectedError = true;\n                        }\n                    );\n                }\n                else {\n                    vm.pollTitle = \"\";\n                    vm.pollDescription = \"\";\n                    vm.pollId = null;\n                    vm.pollOptions = [{ optionId: 0, optionText: \"\" }];\n                    vm.submitText = \"Create Poll\";\n                }\n            }\n\n            function addOption() {\n                vm.errorMsg = \"\";\n                if (vm.pollOptions.length === 0 || vm.pollOptions[vm.pollOptions.length - 1].optionText !== \"\") {\n                    var pollOptionId = vm.pollOptions.length;\n                    vm.pollOptions.push({ optionId: pollOptionId, optionText: \"\" });\n                }\n                else {\n                    vm.errorMsg = \"The poll option text must not be empty before adding another option\"\n                }\n            }\n\n            function removeOption(optionId) {\n                vm.pollOptions.splice(optionId, 1);\n                vm.pollOptions.forEach(function(option, index) {\n                    option.optionId = index;\n                });\n                scopeApply();\n            }\n\n            function submitPoll() {\n                vm.errorMsg = \"\";\n                if (vm.pollOptions.length > 1 && $route.current.$$route.createEdit === appConstants.createEditEnum.edit) {\n                    pollService.editPoll(new pollObject(vm.pollId, vm.pollTitle, vm.pollDescription, vm.pollOptions))\n                        .then(successfulPollCreation, failedPollCreation);\n                }\n                else if (vm.pollOptions.length > 1) {\n                    pollService.createPoll(new pollObject(vm.pollId, vm.pollTitle, vm.pollDescription, vm.pollOptions))\n                        .then(successfulPollCreation, failedPollCreation);\n                }\n                else {\n                    vm.errorMsg = \"You must have at least one option for your poll\";\n                }\n            }\n\n            function successfulPollCreation(res) {\n                window.location = \"/#!/viewPoll/\" + res.data.pollId;\n            }\n\n            function failedPollCreation(res) {\n                if (res.status === 401 || res.status === 403) {\n                    window.location.href = \"/#!/login\";\n                }\n                else {\n                    vm.error = true;\n                    vm.errorMessage = res.message;\n                }\n            }\n\n            function pollObject(pollId, pollName, pollDescription, pollOptions) {\n                this.pollId = pollId;\n                this.name = pollName;\n                this.description = pollDescription;\n                this.options = pollOptions;\n            }\n\n            function scopeApply() {\n                $timeout(function() { $scope.$apply(); });\n            }\n\n        }]);\n}());\n","(function() {\n    angular.module(\"pollApp\")\n        .controller(\"loginController\", [\"$scope\", \"$rootScope\", \"$routeParams\", \"loginService\", function($scope, $rootScope, $routeParams, loginService) {\n            $scope.vm = {};\n            var vm = $scope.vm;\n            vm.logInWithGit = logInWithGit;\n            vm.showError = Boolean($routeParams.error);\n            vm.errorMessage = \"Login Failed, Please Try Again\";\n\n            function logInWithGit() {\n                loginService.login().then(loginSuccess, loginFail);\n            }\n\n            function loginSuccess(resp) {\n                $rootScope.loggedIn = true;\n                window.location.href = \"/\";\n            }\n\n            function loginFail(resp) {\n                vm.error = true;\n            }\n\n        }]);\n}());\n","(function() {\n    angular.module(\"pollApp\")\n        .controller(\"menuController\", [\"$scope\", \"$rootScope\", \"loginService\", function($scope, $rootScope, loginService) {\n\n            var menuVm = $scope.menuVm = {};\n\n            menuVm.logOut = logOut;\n\n            function logOut() {\n                loginService.logout().then(logOutSuccess, failResp);\n            }\n\n            function logOutSuccess() {\n                $rootScope.loggedIn = false;\n                window.location.href = \"/\";\n            }\n\n            function failResp() {\n                $rootScope.error = true;\n            }\n\n        }]);\n}());\n","(function() {\n    angular.module(\"pollApp\")\n        .controller(\"pollStatsController\", [\"$routeParams\", \"$scope\", \"$timeout\", \"pollService\", function($routeParams, $scope, $timeout, pollService) {\n            $scope.vm = {};\n            var vm = $scope.vm;\n            vm.unexpectedError = false;\n            vm.optionResults = [];\n            if ($routeParams.pollId != null && $routeParams.pollId !== \"\") {\n                pollService.getPoll($routeParams.pollId).then(\n                    function(serverResp) {\n                        vm.poll = serverResp.data.pollInfo;\n                        var optionNames = [];\n                        var optionVotes = [];\n                        var optionColors = [];\n                        vm.poll.options.forEach(function(option, index, optionArray) {\n                            optionNames.push(option.optionText);\n                            optionVotes.push(option.numTimesSelected);\n                            optionColors.push(rainbow(optionArray.length, index));\n                        });\n                        initBarChart(optionNames, optionVotes, optionColors);\n                        initPieChart(optionNames, optionVotes, optionColors);\n                        $timeout(function() { $scope.$apply(); });\n                    },\n                    function(serverResp) {\n                        vm.unexpectedError = true;\n                    }\n                );\n            }\n            else {\n                window.location.href = \"/404\";\n            }\n\n            function initBarChart(labels, votes, colours) {\n                var ctx = document.getElementById(\"bar-chart-results\").getContext('2d');\n                var myChart = new Chart(ctx, {\n                    type: 'bar',\n                    data: {\n                        labels: labels,\n                        datasets: [{\n                            label: '# of Votes',\n                            data: votes,\n                            backgroundColor: colours,\n                            borderWidth: 1\n                        }]\n                    },\n                    options: {\n                        scales: {\n                            yAxes: [{\n                                ticks: {\n                                    beginAtZero: true\n                                },\n                                label: '# of Votes'\n                            }]\n                        }\n                    },\n                    responsive: true\n                });\n            }\n\n            function initPieChart(labels, votes, colours) {\n                var ctx = document.getElementById(\"pie-chart-results\").getContext('2d');\n                var myChart = new Chart(ctx, {\n                    type: 'pie',\n                    data: {\n                        labels: labels,\n                        datasets: [{\n                            label: '# of Votes',\n                            data: votes,\n                            backgroundColor: colours,\n                            borderWidth: 1\n                        }]\n                    },\n                    options: {\n\n                    },\n                    responsive: true\n                });\n            }\n\n            function rainbow(numOfSteps, step) {\n                // This function generates vibrant, \"evenly spaced\" colours (i.e. no clustering). This is ideal for creating easily distinguishable vibrant markers in Google Maps and other apps.\n                // Adam Cole, 2011-Sept-14\n                // HSV to RBG adapted from: http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript\n                var r, g, b;\n                var h = step / numOfSteps;\n                var i = ~~(h * 6);\n                var f = h * 6 - i;\n                var q = 1 - f;\n                switch (i % 6) {\n                    case 0:\n                        r = 1;\n                        g = f;\n                        b = 0;\n                        break;\n                    case 1:\n                        r = q;\n                        g = 1;\n                        b = 0;\n                        break;\n                    case 2:\n                        r = 0;\n                        g = 1;\n                        b = f;\n                        break;\n                    case 3:\n                        r = 0;\n                        g = q;\n                        b = 1;\n                        break;\n                    case 4:\n                        r = f;\n                        g = 0;\n                        b = 1;\n                        break;\n                    case 5:\n                        r = 1;\n                        g = 0;\n                        b = q;\n                        break;\n                }\n                var c = \"#\" + (\"00\" + (~~(r * 255)).toString(16)).slice(-2) + (\"00\" + (~~(g * 255)).toString(16)).slice(-2) + (\"00\" + (~~(b * 255)).toString(16)).slice(-2);\n                return (c);\n            }\n\n        }]);\n}());\n","(function() {\n    angular.module(\"pollApp\")\n        .controller(\"pollViewController\", [\"$routeParams\", \"$scope\", \"$rootScope\", \"$timeout\", \"pollService\", \"pollNotifier\", function($routeParams, $scope, $rootScope, $timeout, pollService, pollNotifier) {\n            $scope.vm = {};\n\n            var vm = $scope.vm;\n\n            initViewModel();\n\n            function initViewModel() {\n\n                vm.unexpectedError = false;\n                vm.newOptionFormVisible = false;\n                vm.addNewOptionVisible = true;\n                vm.submitSelection = submitSelection;\n                vm.submitNewOption = submitNewOption;\n                vm.addNewOption = addNewOption;\n                vm.inputValidationPattern = /[a-zA-Z0-9]/;\n                vm.newPollOption = \"\";\n\n                if ($routeParams.pollId != null && $routeParams.pollId !== \"\") {\n                    pollService.getPoll($routeParams.pollId).then(getPollSuccess, requestFailure);\n                }\n                else {\n                    window.location.href = \"/404\";\n                }\n            }\n\n            function getPollSuccess(serverResp) {\n                vm.poll = serverResp.data.pollInfo;\n                vm.selectedOption = serverResp.data.userSelection ? vm.poll.options[serverResp.data.userSelection] : vm.poll.options[0];\n                vm.facebookShareLink = 'https://www.facebook.com/sharer/sharer.php?u=' + window.encodeURI(window.location.href);\n                vm.twitterShareLink = 'https://twitter.com/home?status=' + window.encodeURI(window.location.href);\n            }\n\n            function submitSelection() {\n                pollService.vote($routeParams.pollId, vm.selectedOption.optionId)\n                    .then(function(resp) {\n                        pollNotifier.success(\"Option Selection Successful\");\n                    });\n            }\n\n            function submitNewOption() {\n                if (!$scope.newOptionForm.newPollOption.$error.required && !$scope.newOptionForm.newPollOption.$error.pattern) {\n                    pollService.addPollOption($routeParams.pollId, vm.newPollOption).then(newOptionSuccess, requestFailure);\n                }\n            }\n\n            function newOptionSuccess(resp) {\n                vm.newOptionFormVisible = false;\n                vm.addNewOptionVisible = false;\n                vm.poll = resp.data.data;\n                pollNotifier.success(\"New Option Added\");\n            }\n\n            function addNewOption() {\n                if ($rootScope.loggedIn) {\n                    showNewOptionForm();\n                }\n            }\n\n            function showNewOptionForm() {\n                vm.newOptionFormVisible = true;\n                vm.addNewOptionVisible = false;\n            }\n\n            function requestFailure(resp) {\n                pollNotifier.failure(resp.message);\n            }\n\n        }]);\n}());","(function() {\n    angular.module(\"pollApp\")\n        .controller(\"pollController\", [\"$scope\", \"pollService\", function($scope, pollService) {\n            $scope.pollArray = [];\n            pollService.getPolls(10).then(function(pollResult) {\n                $scope.pollArray = pollResult.data;\n            });\n        }]);\n}());\n","(function() {\n    angular.module(\"pollApp\")\n        .controller(\"userPollController\", [\"$scope\", \"pollService\", function($scope, pollsService) {\n            $scope.vm = {};\n            var vm = $scope.vm;\n            vm.loading = true;\n            vm.error = false;\n            vm.pollArray = [];\n\n            vm.generateStatsLink = generateStatsLink;\n\n            vm.generateEditLink = generateEditLink;\n\n            initData();\n\n            function initData() {\n                pollsService.getUserPolls().then(successResp, errorResp);\n            }\n\n            function successResp(resp) {\n                vm.pollArray = resp.data;\n                vm.loading = false;\n            }\n\n            function errorResp(resp) {\n                if (resp.status === 401 || resp.status === 403) {\n                    window.location.href = \"/#!/login\";\n                }\n            }\n\n            function generateEditLink(pollId) {\n                return '#!editPoll/' + pollId;\n            }\n\n            function generateStatsLink(pollId) {\n                return '#!pollStats/' + pollId;\n            }\n\n        }]);\n}());\n"]}